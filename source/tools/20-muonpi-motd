#!/bin/bash
#MuonPi message-of-the-day

#SYMBOLS: â¬¤ğŸ—´ğŸ—¸
R="\e[1;38;5;1m"  # Red
G="\e[1;38;5;2m"  # Green
B="\e[1;38;5;4m"  # Blue
Y="\e[1;38;5;3m"  # Yellow
W="\e[39m" # Clear color
ca="\e[0m"  # Clear all
u="\e[4m"   # Undlerline
cu="\e[24m" # Clear underline
b="\e[1m"   # Bold
cb="\e[21m" # Clear Bold


DaemonStatus=$(systemctl is-active muondetector-daemon.service)
if [ $? -gt 0 ];then
	#inactive
	DaemonStatus="$Râ¬¤  $DaemonStatus"
else
	#active
	DaemonStatus="$Gâ¬¤  $DaemonStatus"
fi

zgrep -h MQTT /var/log/syslog* | sort -n | tail -n1 | grep 'MQTT (re)connected' > /dev/null  # Are there better ways to ask for MQTT connection?
if [ $? -gt 0 ];then
	#fail
	MqttStatus="$Râ¬¤  not connected"
else
	#success
	MqttStatus="$Gâ¬¤  connected"
fi


echo -e ""
echo -e "$G            Î¨ÏˆÏ‰               "    ""
echo -e "$G             Î¨ÎŒÎ«Î¨Ï†Ï‰ÏÎšÎœÎ«Î¨Î¨Îœ    "    ""
echo -e "$G       ÏÏ†ÎšÎœÎšÎšÎšÎ¨   Î…Î…  Î®Îš      "    ""
echo -e "$G    Í¾ÎšÎœÎ¨Î¨ÏˆÎ²ÎšÏ†Î“                "    ""
echo -e "$R     Í¾Î¦ÎœÎ…Î…      Î¼Ï‰      Î‡Ï‰Ï‰   "$G  " __  __ _   _  ___  _   _ $R      _  "
echo -e "$R    Ï‡Î²Î…        Í¾ÎšÎ²      Î¦Î¨Î‰   "$G  "|  \/  | | | |/ _ \| \ | |$R""____ (_) "
echo -e "$R   Î‡ÎšÎ‰         Î¦Î¨      Í¾ÎšÎ²    "$G  "| |\/| | | | | | | |  \| $R|  _ \| | "
echo -e "$R   Î”Î¦         Ï‡Î¨Îœ     Ï‡Î¦Î¨Î…    "$G  "| |  | | |_| | |_| | |\  $R| |_) | | "
echo -e "$R  Î‡Î¨         Î‡Î¨Î¨Î¨Ï‰Î¼ÏÏ†ÎœÎ¤ÎšÎ¨Ï‰Ï‰   "$G  "|_|  |_|\___/ \___/|_| \_$R|  __/|_| "
echo -e "$R   Î¦Ïˆ        Î¦Î¨Î“ Î…Î…Î…    Î…Î…    "$G  "                         $R|_|       "
echo -e "$R    Î«Î¦      Í¾Î¨Î’               "    ""
echo -e "$R     Î¨Ï‰     Î…Î…                "$W  "Daemon status:    $DaemonStatus"
echo -e "$R      Î¨Î¨Ï‰ÏÍ¾Î¼Ï†                 "$W  "MQTT-Connection:  $MqttStatus"
echo -e "$R        Î…Î…Î…Î…Î¨Î¨Ï‰               "    ""
echo -e "$R              Î…Î«Î¨Î¨ÎœÎ“          "    ""
echo -e "\e[0m"
